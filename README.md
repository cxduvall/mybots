See FitnessGraph_example.png for fitness of best creatures each generation for 5 runs.


Assignment 8 for the Northwestern course CS 396 -- Artificial Life. This repository contains a Python program that can simulate the evolution of virtual robots (with evolving brains and bodies). Robot fitness is calculated as the euclidian distance of a robot from the origin in the xy-plane after 10 seconds of simulation.

Running "python3 main.py" will pass through several simulated "runs", each with a different random seed. As-is, 5 runs will occur, each with 100 generations of 10 simulated creatures (these numbers can be modified in constants.py). At the end of each run, a graph will be displayed showing the fitness of each "lineage" (member of the population at each generation). At the end of the last run, the simulations of creatures from the last run's final generation will be displayed. At the end of the program, the random seeds for each run of the program will be printed. Saved graphs include "lineageGraph_X.png", where X is the seed of a run and the graph is the fitness by lineage for that run, and "fitnessGraph_Y".png, which compares the fitness of the fittest robot at each generation across all runs of the simulation, with Y being the random seed of Run 0. Running "python3 main.py X", where X is a random seed, will perform a single run with that seed (caution: it may overwrite the fitnessGraph_Y.png if the seed was seed 0 of a previous simulation). Note: view.py (meant to be used to view simulations of creatures without having to re-run main.py) is not currently functional (but main.py works).

![Diagram1](https://user-images.githubusercontent.com/57238295/221744720-f49f8a53-ab19-481a-b607-be2081615569.jpg)

![Diagram2](https://user-images.githubusercontent.com/57238295/221744777-169ac7fd-ec03-434c-86c9-dd281455203f.jpg)

Initial robots are generated with a random number of rectangular prisms to their body (3-5), a 50% chance of each prism having a sensor (segments with sensors are green, ones without are blue) and random shapes for each prism (0.5-4 units long, wide and tall). Each pair of connected prisms are joined by a single joint pointed in the positive x, y or z direction (with equal probability). The creatures are generated by first creating an initial prism, then iteratively choosing a random prism that has already been created, a random face on that prism, and a random location of that face for the joint. Then, a random joint direction/new prism size are determined, and the new prism is created flush against the existing prism, centered on the joint point (with no initial rotation). If at any point during this process a prism would overlap with existing prisms or surpass a total creature height limit (currently set at 3 units as self.maxHeight in solution.py), the prism is discarded and a new one is calculated (as many times as needed to find a valid prism). In this way, robot bodies are generated to fill space in all 3 dimensions (as prisms are added to any face of existing prism).

The robot bodies are evolved in the following way: Each generation, there is a 30% chance of the the program attempting to mutate the body. If an attempt at mutation is made, there is a 10% chance of adding a prism, in which case a new prism is added in the same way prisms are added when the body is initialized (choose a random existing prism, face, offsets on that face, dimensions of the new prism and joint direction, repeating the process until a solution is found that satisfies the non-overlap and height limit constraints). Otherwise (with a 90% chance), the program attempts to remove a cube, deleting a random cube, its parent joint and all of its "descendant" cubes and joints -- it will simply abort this procedure if less than 2 cubes remain after deletion.

The neural network "brain" of the creature is initially generated by creating a "sensor neuron" for each sensor prism and a "motor neuron" for each joint -- the layer of sensor neurons is fully connected to the layer of motor neurons, and weights are initialized randomly as a floating point number between -1 and 1.

The brain is evolved by randomizing a single synapse weight in the brain (after body mutation has occurred, if it occurrs).

All in all, the morphospace of this program includes a wide variety of creatures composed of rectangular prisms (including those which overlap with themselves), with parts initially flush against one another, joints being at the center of at least one of the two parts they connect, joints in 1 of 3 cardinal directions and all joints being simple revolute joints. It does not include creatures with other shapes of body parts, parts not flush against each other on initialization, joints with neither of their parts centered on the joint, joints in a direction other than the cardinal 3 or ball-and-socket or sliding joints. Only fully-connected brains with no hidden layers are possible (sensors are directly connected to motors, with every sensor connected to every motor with some random weight, though some of these weights could be close to zero). Because the brain is fully connected, a sensor on one body can affect a motor on the other side (or anywhere on the body).

Every generation (whether the body is mutated or not), for each member of the robot population, the fitness of the mutated robot is compared to its parent, and the fitter creature continues evolving.

Resources Used

Pyrosim: github.com/jbongard/pyrosim

r/ludobots: reddit.com/r/ludobots/wiki/installation/
